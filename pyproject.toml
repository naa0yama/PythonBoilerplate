[tool.poetry]
name                       = "pythonboilerplate"
version                    = "0.1.0"
description                = "Python を開発する時用ボイラープレート"
authors                    = [
    "Naoki Aoyama"
]
license                    = "AGPL-3.0"

# sphinx 用
[project]
name                       = "pythonboilerplate"
version                    = "0.1.0"
description                = "Python を開発する時用ボイラープレート"
[[project.authors]]
name                       = "Naoki Aoyama"

[tool.poetry.dependencies]
python                     = "~3.10"

[tool.poetry.group.dev.dependencies]
autoflake                  = "~2.0"
black                      = "~22.12.0"
flake8                     = "~6.0.0"
flake8-annotations         = "~2.9.0"
flake8-black               = "~0.3.2"
flake8-bugbear             = "~22.12.0"
flake8-builtins            = "~2.1.0"
flake8-commas              = "~2.1.0"
flake8-comprehensions      = "~3.10.0"
flake8-debugger            = "~4.1.0"
flake8-docstrings          = "~1.6.0"
flake8-fixme               = "~1.1.1"
flake8-isort               = "~6.0.0"
flake8-print               = "~5.0.0"
flake8-return              = "~1.2.0"
flake8-simplify            = "~0.19.2"
flake8-variables-names     = "~0.0.4"
ipykernel                  = "~6.20.0"
isort                      = "~5.11.0"
mypy                       = "~0.991"
pip                        = "^22.0.0"
pre-commit                 = "~2.21.0"
pytest                     = "~7.2.0"
pytest-azurepipelines      = "~1.0.4"
pytest-cov                 = "~4.0.0"
sphinx                     = "~5.3.0"
sphinx-autobuild           = "~2021.3.14"
sphinx-pyproject           = "~0.1.0"
sphinx-rtd-theme           = "~1.1.1"
taskipy                    = "~1.10.3"
tox                        = "~4.2.0"

[tool.black]
line-length                = 99
exclude                    = '''
(
    migrations
    | .mypy_cache
    | .pytest_cache
    | .tox
    | .venv
    | .history
)
'''

[tool.isort]
force_single_line          = true
force_sort_within_sections = true
include_trailing_comma     = true
line_length                = 99
profile                    = "black"
skip                       = [
    ".history",
    ".mypy_cache",
    ".pytest_cache",
    ".tox",
    ".venv",
]

[tool.mypy]
# Ref: https://mypy.readthedocs.io/en/stable/config_file.html?highlight=pyproject

## Import discovery
ignore_missing_imports     = true
warn_unused_configs        = true

## Disallow dynamic typing
disallow_any_unimported    = true
disallow_any_generics      = true
disallow_untyped_defs      = true

## disallow_any_unimported
disallow_untyped_calls     = true
disallow_incomplete_defs   = true
check_untyped_defs         = true
strict_optional            = true

## strict_optional
warn_unused_ignores        = true
warn_no_return             = true
warn_return_any            = true
warn_unreachable           = true

[tool.pytest]
[tool.pytest.ini_options]
minversion                 = "6.0"
addopts                    = [
    "-r sfp",
    "--verbose",
    "--verbose",
    "--durations=0",
    "--cov=src",
    "--cov=tests",
    "--cov-report=term",
    "--cov-report=term-missing",
    "--cov-report=term-missing",
    "--cov-report=xml",
    "--cov-report=html"
]

[tool.sphinx-pyproject]
autosummary_generate       = true
project                    = "pythonboilerplate"
copyright                  = "2022, naa0yama"
language                   = "en"
package_root               = "src/pythonboilerplate"
html_theme                 = "sphinx_rtd_theme"
todo_include_todos         = true
templates_path             = ["_templates"]
html_static_path           = ["_static"]
extensions                 = [
    "sphinx.ext.autodoc",
    "sphinx.ext.viewcode",
    "sphinx.ext.todo",
    'sphinx.ext.autosummary',
    "sphinx.ext.napoleon",
]

[tool.taskipy.tasks]
test                       = "pytest"
testview                   = "python3 -m http.server 8000 --directory htmlcov/"
docs                       = "sphinx-apidoc -F -o docs/source src && sphinx-build docs/source docs/build"
docslive                   = "sphinx-autobuild docs/source/ docs/build/"

[build-system]
requires                   = [
    "poetry-core>=1.0.0",
    "setuptools",
]
build-backend              = "poetry.core.masonry.api"
